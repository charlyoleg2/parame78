import{a as Da,b as qa}from"../chunks/BVRTqcp_.js";import{H as Ya,a as Pa,g as Va}from"../chunks/DsMXwFW9.js";import"../chunks/0-hfpWel.js";import"../chunks/DsnmJJEf.js";import{n as aa,aH as ga,m as Kt,N as Ea,aI as Fa,aq as Za,aJ as Ka,aK as Ga,aL as Ba,ab as Ja,z as Ma,O as Ta,aM as Ha,aN as Qa,V as y,v as r,au as $a,U as $t,aO as Mt,p as _t,ad as _a,f as Ft,a as P,b as pt,d as s,r as e,t as st,aP as g,c as T,s as a,ac as B,af as kt,e as S,ag as Lt,y as pa,aQ as Te,aR as $e,ae as xa,aS as ha,aT as ts,aa as es,aU as wa,aV as as}from"../chunks/BbJ2r-da.js";import{s as Z,e as jt,J as ba,K as nt,L as sa,M as ss,N as ls,O as rs,P as ns,Q as ya,R as ta,T as La,U as Qt,V as os,W as cs,X as is,Y as ds,Z as ea,_ as va,$ as vs,f as de,A as ua,a0 as Sa,r as us,a1 as it,a2 as fs,a3 as Na,a4 as ms,a5 as hs,a6 as bs,a7 as gs}from"../chunks/TRi1Nqkf.js";import{p as Nt,i as Ie,b as la}from"../chunks/CWMC26UC.js";import{s as _s}from"../chunks/CQGWfUKG.js";import{p as za}from"../chunks/bbOhRu8O.js";import{i as ps}from"../chunks/wCH1lj-T.js";function Ra(l){var t,o,n="";if(typeof l=="string"||typeof l=="number")n+=l;else if(typeof l=="object")if(Array.isArray(l)){var d=l.length;for(t=0;t<d;t++)l[t]&&(o=Ra(l[t]))&&(n&&(n+=" "),n+=o)}else for(o in l)l[o]&&(n&&(n+=" "),n+=o);return n}function ys(){for(var l,t,o=0,n="",d=arguments.length;o<d;o++)(l=arguments[o])&&(t=Ra(l))&&(n&&(n+=" "),n+=t);return n}function ja(l){return typeof l=="object"?ys(l):l??""}const Aa=[...` 	
\r\fÂ \v\uFEFF`];function ks(l,t,o){var n=l==null?"":""+l;if(t&&(n=n?n+" "+t:t),o){for(var d of Object.keys(o))if(o[d])n=n?n+" "+d:d;else if(n.length)for(var c=d.length,v=0;(v=n.indexOf(d,v))>=0;){var i=v+c;(v===0||Aa.includes(n[v-1]))&&(i===n.length||Aa.includes(n[i]))?n=(v===0?"":n.substring(0,v))+n.substring(i+1):v=i}}return n===""?null:n}function Dt(l,t,o,n,d,c){var v=l.__className;if(aa||v!==o||v===void 0){var i=ks(o,n,c);(!aa||i!==l.getAttribute("class"))&&(i==null?l.removeAttribute("class"):l.className=i),l.__className=o}else if(c&&d!==c)for(var u in c){var k=!!c[u];(d==null||k!==!!d[u])&&l.classList.toggle(u,k)}return c}function Ua(l,t,o=!1){if(l.multiple){if(t==null)return;if(!Za(t))return Ka();for(var n of l.options)n.selected=t.includes(Ue(n));return}for(n of l.options){var d=Ue(n);if(Ga(d,t)){n.selected=!0;return}}(!o||t!==void 0)&&(l.selectedIndex=-1)}function Ds(l){var t=new MutationObserver(()=>{Ua(l,l.__value)});t.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ba(()=>{t.disconnect()})}function Oa(l,t,o=t){var n=new WeakSet,d=!0;ga(l,"change",c=>{var v=c?"[selected]":":checked",i;if(l.multiple)i=[].map.call(l.querySelectorAll(v),Ue);else{var u=l.querySelector(v)??l.querySelector("option:not([disabled])");i=u&&Ue(u)}o(i),Kt!==null&&n.add(Kt)}),Ea(()=>{var c=t();if(l===document.activeElement){var v=Fa??Kt;if(n.has(v))return}if(Ua(l,c,d),d&&c===void 0){var i=l.querySelector(":checked");i!==null&&(c=Ue(i),o(c))}l.__value=c,d=!1}),Ds(l)}function Ue(l){return"__value"in l?l.__value:l.value}function ve(l,t,o=t){var n=new WeakSet;ga(l,"input",async d=>{var c=d?l.defaultValue:l.value;if(c=fa(l)?ma(c):c,o(c),Kt!==null&&n.add(Kt),await Ja(),c!==(c=t())){var v=l.selectionStart,i=l.selectionEnd,u=l.value.length;if(l.value=c??"",i!==null){var k=l.value.length;v===i&&i===u&&k>u?(l.selectionStart=k,l.selectionEnd=k):(l.selectionStart=v,l.selectionEnd=Math.min(i,k))}}}),(aa&&l.defaultValue!==l.value||Ma(t)==null&&l.value)&&(o(fa(l)?ma(l.value):l.value),Kt!==null&&n.add(Kt)),Ta(()=>{var d=t();if(l===document.activeElement){var c=Fa??Kt;if(n.has(c))return}fa(l)&&d===ma(l.value)||l.type==="date"&&!d&&!l.value||d!==l.value&&(l.value=d??"")})}function St(l,t,o=t){ga(l,"change",n=>{var d=n?l.defaultChecked:l.checked;o(d)}),(aa&&l.defaultChecked!==l.checked||Ma(t)==null)&&o(l.checked),Ta(()=>{var n=t();l.checked=!!n})}function fa(l){var t=l.type;return t==="number"||t==="range"}function ma(l){return l===""?null:+l}function xs(l,t){Ha(window,["resize"],()=>Qa(()=>t(window[l])))}function ws(l){var t=$a(0);return function(){return arguments.length===1?(y(t,r(t)+1),arguments[0]):(r(t),l())}}function Ls(l,t){throw new Ya(l,t)}function Ss({params:l}){const t=l.design;if(Object.keys(Da).includes(t))return{pageDef:Da[t],allLink:qa};Ls(404,"Design undefined!")}const Ml=Object.freeze(Object.defineProperty({__proto__:null,load:Ss},Symbol.toStringTag,{value:"Module"})),H=$t({});function Ia(l,t,o){if(Object.keys(H).includes(l)){const d=H[l],c=Object.keys(d);for(const v of Object.keys(t))c.includes(v)?o&&(d[v]=t[v]):d[v]=t[v];H[l]=d}else H[l]=t}function Ns(l){const t=l.pDef.partName,o={};for(const n of l.pDef.params)o[n.name]=n.init;Ia(t,o,!1)}var zs=T('<aside class="backdrop svelte-1f929uh"><div class="dialog svelte-1f929uh"><button class="svelte-1f929uh"><img/></button></div></aside>');function Xa(l,t){_t(t,!0);let o=Nt(t,"modalOpen",15);function n(){o(!1)}var d=_a(),c=Ft(d);{var v=i=>{var u=zs(),k=s(u),m=s(k),N=s(m);e(m),e(k),e(u),st(()=>{Z(N,"src",t.svgPath),Z(N,"alt",t.svgPath)}),g("click",m,n),P(i,u)};Ie(c,i=>{o()&&i(v)})}P(l,d),pt()}Mt(["click"]);var js=T('<button class="svelte-hdkpqj"><img class="svelte-hdkpqj"/></button>'),As=T('<section class="svelte-hdkpqj"><!> <!></section>');function Os(l,t){_t(t,!0);function o(m){const N=[];for(const A of Object.values(m.paramSvg))N.includes(A)||N.push(A);return N}let n=B(!1),d=B(""),c=kt(()=>o(t.pDef).map(m=>ba(`/pgdsvg/${m}`)));function v(m){y(d,m,!0),y(n,!0)}var i=As(),u=s(i);Xa(u,{get svgPath(){return r(d)},get modalOpen(){return r(n)},set modalOpen(m){y(n,m,!0)}});var k=a(u,2);jt(k,16,()=>r(c),m=>m,(m,N)=>{var A=js(),x=s(A);e(A),st(()=>{Z(x,"src",N),Z(x,"alt",N)}),g("click",A,()=>v(N)),P(m,A)}),e(i),P(l,i),pt()}Mt(["click"]);var Cs=T('<aside class="backdrop svelte-gdn497"><div><article class="question svelte-gdn497"><!></article> <footer class="svelte-gdn497"><button class="cancel svelte-gdn497">Cancel</button> <button class="ok svelte-gdn497"> </button></footer></div></aside>');function Re(l,t){_t(t,!0);let o=Nt(t,"okName",3,"Ok"),n=Nt(t,"modalOpen",15),d=Nt(t,"sizeLarge",3,!1);function c(){n(!1)}function v(){t.okFunc(),n(!1)}var i=_a(),u=Ft(i);{var k=m=>{var N=Cs(),A=s(N);let x;var f=s(A),W=s(f);_s(W,()=>t.children),e(f);var R=a(f,2),K=s(R),O=a(K,2),tt=s(O,!0);e(O),e(R),e(A),e(N),st(()=>{x=Dt(A,1,"dialog svelte-gdn497",null,x,{sizeLarge:d()}),S(tt,o())}),g("click",K,c),g("click",O,v),P(m,N)};Ie(u,m=>{n()&&m(k)})}P(l,i),pt()}Mt(["click"]);var Ps=T('<p class="diagItem svelte-ckhoth"> </p>'),Fs=T('<p class="diagTitle svelte-ckhoth">Do you really want to delete the following localStorage keys?</p> <!>',1),Ms=T('<tr class="svelte-ckhoth"><td><input type="checkbox"/></td><td class="svelte-ckhoth"><button class="svelte-ckhoth"> </button></td><td> </td></tr>'),Ts=T('<div class="deleteKeys svelte-ckhoth"><button class="svelte-ckhoth">Delete</button> <!> <table class="svelte-ckhoth"><thead class="svelte-ckhoth"><tr><td>Delete</td><td>Key name</td><td>Last modification</td></tr><tr><td><input type="checkbox"/></td><td class="instruction">delete all</td><td></td></tr></thead><tbody class="svelte-ckhoth"></tbody></table></div>');function Wa(l,t){_t(t,!0);let o=Nt(t,"storeName",15),n=Nt(t,"localKeys",15),d=B($t({})),c=B(!1),v=B(!1);function i(){let h=[];const X=new RegExp(`^${t.pageName}_`);return h=Object.keys(window.localStorage).filter(E=>X.test(E)).map(E=>E.replace(X,"")),h.sort(),h}n(i());function u(h){o(h)}function k(h){let X={};for(const G of h){let E="";const et=`${t.pageName}_${G}`,Q=window.localStorage.getItem(et);Q!==null&&(E=JSON.parse(Q).lastModif),X[G]=E}return X}let m=kt(()=>k(n()));function N(h){let X={};for(const G of h)X[G]=!1;return X}y(d,N(n()),!0);function A(){for(const h of n())r(d)[h]=r(c)}function x(){for(const h of n())if(r(d)[h]){const X=`${t.pageName}_${h}`;window.localStorage.removeItem(X)}y(c,!1),n(i())}var f=Ts(),W=s(f),R=a(W,2);Re(R,{okName:"Confirm",okFunc:x,get modalOpen(){return r(v)},set modalOpen(h){y(v,h,!0)},children:(h,X)=>{var G=Fs(),E=a(Ft(G),2);jt(E,16,n,et=>et,(et,Q)=>{var ft=_a(),rt=Ft(ft);{var J=bt=>{var ct=Ps(),mt=s(ct,!0);e(ct),st(()=>S(mt,Q)),P(bt,ct)};Ie(rt,bt=>{r(d)[Q]&&bt(J)})}P(et,ft)}),P(h,G)},$$slots:{default:!0}});var K=a(R,2),O=s(K),tt=a(s(O)),ot=s(tt),dt=s(ot);nt(dt),e(ot),Lt(2),e(tt),e(O);var vt=a(O);jt(vt,20,n,h=>h,(h,X)=>{var G=Ms(),E=s(G),et=s(E);nt(et),e(E);var Q=a(E),ft=s(Q),rt=s(ft,!0);e(ft),e(Q);var J=a(Q),bt=s(J,!0);e(J),e(G),st(()=>{S(rt,X),S(bt,r(m)[X])}),St(et,()=>r(d)[X],ct=>r(d)[X]=ct),g("click",ft,()=>u(X)),P(h,G)}),e(vt),e(K),e(f),g("click",W,()=>{y(v,!0)}),g("change",dt,A),St(dt,()=>r(c),h=>y(c,h)),P(l,f),pt()}Mt(["click","change"]);var Rs=T('<p class="warnMsg svelte-1pylysg"> </p>'),Us=T('<!> <div class="svelte-1pylysg"><label for="storName" class="svelte-1pylysg">Give a name to your parameter-set:</label> <input type="text" id="storName" required="" minlength="4" maxlength="30" size="32" class="svelte-1pylysg"/> <!></div>',1);function Is(l,t){_t(t,!0);let o=Nt(t,"storeName",15),n=B($t([]));function d(A){const x=/[-:]/g,f=/\..*$/,W=new Date().toISOString().replace(x,"").replace(f,"").replace("T","_");return`${A}_${W}`}o(d(t.pageName));let c=kt(()=>r(n).includes(o()));var v=Us(),i=Ft(v);Wa(i,{get pageName(){return t.pageName},get storeName(){return o()},set storeName(A){o(A)},get localKeys(){return r(n)},set localKeys(A){y(n,A,!0)}});var u=a(i,2),k=a(s(u),2);nt(k);var m=a(k,2);{var N=A=>{var x=Rs(),f=s(x);e(x),st(()=>S(f,`Warning: name ${o()??""} already used`)),P(A,x)};Ie(m,A=>{r(c)&&A(N)})}e(u),ve(k,o),P(l,v),pt()}var Xs=T('<!> <div class="svelte-mv3do5"><label for="storName" class="svelte-mv3do5">Select a parameter-set:</label> <input type="text" id="storName" readonly="" minlength="4" maxlength="30" size="32" class="svelte-mv3do5"/></div>',1);function Ws(l,t){_t(t,!0);let o=Nt(t,"storeName",15),n=B($t([]));function d(k){let m=o();return!k.includes(m)&&(k.length>0?m=k[0]:m=""),m}pa(()=>{o(d(r(n)))});var c=Xs(),v=Ft(c);Wa(v,{get pageName(){return t.pageName},get storeName(){return o()},set storeName(k){o(k)},get localKeys(){return r(n)},set localKeys(k){y(n,k,!0)}});var i=a(v,2),u=a(s(i),2);nt(u),e(i),st(()=>sa(u,o())),P(l,c),pt()}const L=$t({dLayers:ls(),zAdjust:ss(),canvasZWidth:0});var qs=T('<canvas class="mini svelte-19ya79l"></canvas>');function Ca(l,t){_t(t,!0);const o=200,n=.6;let d;function c(u,k,m,N){const A=rs(N);A.ruler=!1;let x;if(d){const f=d.getContext("2d");f.clearRect(0,0,f.canvas.width,f.canvas.height);const W=f.canvas.width;try{t.full?x=u.getAdjustFull(f.canvas.width,f.canvas.height):x=ns(m,W,k),u.draw(f,x,A)}catch(R){console.log(R)}}}pa(()=>{c(t.pFig,L.zAdjust,L.canvasZWidth,L.dLayers)});function v(u){const k=u.offsetX,m=u.offsetY,N=d.getContext("2d"),A=N.canvas.width/2,x=N.canvas.height/2;if(u.button===0){let f=1;k>A&&(f+=1*n),m>x&&(f+=2*n),N.canvas.width=f*o,N.canvas.height=f*o,c(t.pFig,L.zAdjust,L.canvasZWidth,L.dLayers)}}var i=qs();Z(i,"width",o),Z(i,"height",o),la(i,u=>d=u,()=>d),g("click",i,v),P(l,i),pt()}Mt(["click"]);function Ys(l,t){const o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),o.setAttribute("download",l),o.click(),o.remove()}function Vs(l,t,o){const n=/[-:]/g,d=/\..*$/,c=new Date().toISOString().replace(n,"").replace(d,"").replace("T","_");return ya(c,l,t,o)}function ka(l,t,o){const n=/[-:]/g,d=/\..*$/,c=new Date().toISOString().replace(n,"").replace(d,"").replace("T","_"),v=`px_${l}_${c}.json`,i=ya(c,l,t,o);Ys(v,i)}function Es(l,t,o){const n=new URL(l),d=2e3;let c=n.toString().length;for(const v of Object.keys(t)){const i=t[v].toString(),u=2+v.length+i.length;n.searchParams.append(encodeURIComponent(v),encodeURIComponent(i)),c+=u}return c>=d&&console.log(`warn547: generateUrl: strLength ${c} larger than strLengthLimit ${d}`),n.toString()}const Zs=Symbol();class Ks extends URLSearchParams{#t=B(0);#s=Bs();#e=!1;#a(){if(!this.#s||this.#e)return;this.#e=!0;const t=this.toString();this.#s.search=t&&`?${t}`,this.#e=!1}[Zs](t){if(!this.#e){this.#e=!0;for(const o of[...super.keys()])super.delete(o);for(const[o,n]of t)super.append(o,n);Te(this.#t),this.#e=!1}}append(t,o){super.append(t,o),this.#a(),Te(this.#t)}delete(t,o){var n=super.has(t,o);super.delete(t,o),n&&(this.#a(),Te(this.#t))}get(t){return r(this.#t),super.get(t)}getAll(t){return r(this.#t),super.getAll(t)}has(t,o){return r(this.#t),super.has(t,o)}keys(){return r(this.#t),super.keys()}set(t,o){var n=super.getAll(t).join("");super.set(t,o),n!==super.getAll(t).join("")&&(this.#a(),Te(this.#t))}sort(){super.sort(),this.#a(),Te(this.#t)}toString(){return r(this.#t),super.toString()}values(){return r(this.#t),super.values()}entries(){return r(this.#t),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return r(this.#t),super.size}}let Gs=null;function Bs(){return Gs}var Js=T('<input type="number" class="input-number svelte-3rhvir"/> <input type="range" class="svelte-3rhvir"/>',1),Hs=T("<option> </option>"),Qs=T("<select></select>"),$s=T("<option> </option>"),tl=T("<select></select>"),el=T('<tr><td class="svelte-3rhvir"> </td><td class="svelte-3rhvir"><button class="svelte-3rhvir"> </button></td><td class="svelte-3rhvir"><!></td><td> </td><td> </td><td class="svelte-3rhvir"> </td><td class="svelte-3rhvir"> </td><td> </td></tr>'),al=T('<tbody class="svelte-3rhvir"><tr class="separator svelte-3rhvir"><td class="svelte-3rhvir"> </td><td class="svelte-3rhvir"> </td><td class="svelte-3rhvir"><label class="svelte-3rhvir"><input type="checkbox" class="svelte-3rhvir"/> <span class="svelte-3rhvir"></span></label></td></tr></tbody> <tbody></tbody>',1),sl=T('<p>Copy this URL and send it to your friends!</p> <p class="cUrl svelte-3rhvir"> </p>',1),ll=T('<section class="svelte-3rhvir"><h2 class="svelte-3rhvir">Parameters</h2> <main class="svelte-3rhvir"><label for="loadFParams" class="fileUpload svelte-3rhvir">Load Params from File</label> <input id="loadFParams" type="file" accept="text/plain, application/json" class="svelte-3rhvir"/> <button class="svelte-3rhvir">Set Params Default</button> <button class="svelte-3rhvir">Load Params from localStorage</button> <!> <!> <textarea rows="3" cols="80" readonly="" wrap="soft"></textarea> <table class="svelte-3rhvir"><thead class="svelte-3rhvir"><tr class="svelte-3rhvir"><td class="svelte-3rhvir">&#35;</td><td class="svelte-3rhvir">Parameter name</td><td class="svelte-3rhvir">Value<span class="svelte-3rhvir"><button class="svelte-3rhvir">&minus;</button><button class="svelte-3rhvir">+</button></span></td><td>Unit</td><td>Default</td><td class="svelte-3rhvir">Min</td><td class="svelte-3rhvir">Max</td><td>Step</td></tr></thead><!></table> <div class="comment svelte-3rhvir"><label for="inComment">Comment:</label> <input type="text" id="inComment" maxlength="150"/></div> <button class="svelte-3rhvir">Save Parameters to File</button> <button class="svelte-3rhvir">Save Parameters as URL</button> <button class="svelte-3rhvir">Save Parameters to localStorage</button> <!> <!></main> <!> <button class="side-img svelte-3rhvir"><img class="svelte-3rhvir"/></button> <div class="mini-canvas svelte-3rhvir"><!></div> <div class="mini-canvas svelte-3rhvir"><!></div></section>');function rl(l,t){_t(t,!0);let o=B(""),n=B(!1),d=B(""),c=B(!1),v=B(!1),i=B(!1),u=B(!1),k=B(!1),m=B(""),N=B(""),A=B("");const x=t.pDef;let f=B($t(rt(x.params[0].name))),W=B(!1),R=B($t(mt(ct(x.params))));Pa(()=>{y(f,rt(t.pDef.params[0].name),!0),y(R,mt(ct(t.pDef.params)),!0)});function K(_,p){let j="",M=!1;_!==t.pDef.partName&&(j+=`warn361: read partName: '${_}'  expected partName: '${t.pDef.partName}'
`,M=!0);let at=0,ht=0,zt=0;const oe=[];for(const gt of t.pDef.params)oe.push(gt.name),Object.hasOwn(p,gt.name)?(at+=1,H[t.pDef.partName][gt.name]===p[gt.name]?zt+=1:H[t.pDef.partName][gt.name]=p[gt.name]):ht+=1;let wt=0;for(const gt of Object.keys(p))oe.includes(gt)||(wt+=1,j+=`warn363: parameter ${gt} not in the scope of the design (${wt})
`);const De=wt>0,Vt=new Date().toLocaleTimeString();return j+=`Params loaded at ${Vt} :`,j+=` def-nb: ${Object.keys(t.pDef.params).length}`,j+=`, cover-nb: ${at}, uncover-nb: ${ht}
`,j+=` load-nb: ${Object.keys(p).length}`,j+=`, equal-nb: ${zt}, changed-nb: ${at-zt}`,j+=`, out-of-scope: ${wt}`,[j,M||De]}async function O(_){try{const p=await fetch(_);if(!p.ok)throw`err627: error while fetching ${_}`;const j=await p.text(),[M]=La(j);(at=>{var ht=$e(at,2);y(d,ht[0],!0),y(c,ht[1],!0)})(K(M.partName,M.pVal)),y(o,M.comment,!0)}catch(p){let j=`err223: error by fetching px file
`;j+=p,y(d,j,!0),y(c,!0)}}async function tt(){{const _=new Ks(za.url.search),p="pxUrl";if(_.has(p)){const M=_.get(p);_.delete(p),M?await O(M):(y(d,`err123: error by parsing URL-search-params
`),y(c,!0))}const j={};for(const[M,at]of _){const ht=Number(at);isNaN(ht)||(j[M]=ht)}Object.keys(j).length>0&&(M=>{var at=$e(M,2);y(d,at[0],!0),y(c,at[1],!0)})(K(t.pDef.partName,j))}}tt();function ot(_){try{const[p]=La(_);(j=>{var M=$e(j,2);y(d,M[0],!0),y(c,M[1],!0)})(K(p.partName,p.pVal)),y(o,p.comment,!0)}catch(p){let j=`err723: error by parsing parameter file
`;j+=p,y(d,j,!0),y(c,!0)}}async function dt(_){const p=await _.text();ot(p)}function vt(_){if(_.target){const p=_.target.files;p&&dt(p[0])}}function h(){ka(t.pDef.partName,H[t.pDef.partName],r(o))}function X(){const _={};for(const p of t.pDef.params)_[p.name]=p.init;(p=>{var j=$e(p,2);y(d,j[0],!0),y(c,j[1],!0)})(K(t.pDef.partName,_))}function G(){if(r(m)!==void 0&&r(m)!==""){const _=`${t.pDef.partName}_${r(m)}`;{const p=window.localStorage.getItem(_);p===null?(y(d,`Warn157: localStorage key ${_} is null`),y(c,!0)):ot(p)}}else y(d,"Warn239: No valid name for loading from localStorage!"),y(c,!0)}function E(){if(r(N)!==void 0&&r(N)!==""){const _=`${t.pDef.partName}_${r(N)}`,p=/\..*$/,j=new Date().toISOString().replace(p,""),M=ya(j,t.pDef.partName,H[t.pDef.partName],r(o));window.localStorage.setItem(_,M)}else console.log("Warn639: No valid name for writing to localStorage!")}function et(){return Es(za.url.href,H[t.pDef.partName]).toString()}function Q(){y(A,et(),!0),y(u,!0)}function ft(){}function rt(_){let p=ba("/pgdsvg/default_param_blank.svg");return Object.keys(t.pDef.paramSvg).includes(_)&&(p=ba(`/pgdsvg/${t.pDef.paramSvg[_]}`)),p}function J(_){y(f,rt(_),!0)}function bt(){y(W,!0)}function ct(_){const p=[];let M={sectionName:"main",sectionID:"g0main",sectionVisCollapse:!1,params:[]},at=0;for(const ht of _)ht.pType===ta.eSectionSeparator?(p.push(M),at+=1,M={sectionName:ht.name,sectionID:`g${at}${ht.name}`,sectionVisCollapse:!0,params:[]}):M.params.push(ht);return p.push(M),p}function mt(_){const p={};for(const j of _)p[j.sectionID]=j.sectionVisCollapse;return p}let Tt=kt(()=>ct(t.pDef.params));function b(){y(n,!0)}function z(){y(n,!1)}let C=kt(()=>r(n)?2:4),Y=kt(()=>r(n)?2:3),At=kt(()=>r(n)?50:70);var xt=ll(),Rt=a(s(xt),2),It=a(s(Rt),2),Xt=a(It,2),Ut=a(Xt,2),Ot=a(Ut,2);Re(Ot,{okName:"Overwrite Parameters",okFunc:X,get modalOpen(){return r(v)},set modalOpen(_){y(v,_,!0)},children:(_,p)=>{Lt();var j=xa("Load the default parameters ?");P(_,j)},$$slots:{default:!0}});var te=a(Ot,2);Re(te,{okName:"Load Parameters",okFunc:G,get modalOpen(){return r(i)},set modalOpen(_){y(i,_,!0)},children:(_,p)=>{Ws(_,{get pageName(){return t.pDef.partName},get storeName(){return r(m)},set storeName(j){y(m,j,!0)}})},$$slots:{default:!0}});var qt=a(te,2);ha(qt);let Xe;var ee=a(qt,2),ue=s(ee),fe=s(ue),Gt=a(s(fe),2),ae=a(s(Gt)),We=s(ae),me=a(We);e(ae),e(Gt);var qe=a(Gt);let se;var Ye=a(qe);let he;var ra=a(Ye,3);let be;e(fe),e(ue);var ge=a(ue);jt(ge,19,()=>r(Tt),_=>_.sectionName,(_,p,j)=>{var M=al(),at=Ft(M),ht=s(at),zt=s(ht),oe=s(zt,!0);e(zt);var wt=a(zt),De=s(wt,!0);e(wt);var Vt=a(wt),xe=s(Vt),gt=s(xe);nt(gt),Lt(2),e(xe),e(Vt),e(ht),e(at);var Jt=a(at,2);let Be;jt(Jt,23,()=>r(p).params,Wt=>Wt.name,(Wt,V,we)=>{var ce=el();let Le;var Se=s(ce),Ne=s(Se);e(Se);var Ht=a(Se),ze=s(Ht),je=s(ze,!0);e(ze),e(Ht);var Ae=a(Ht),Oe=s(Ae);{var na=w=>{var I=Js(),$=Ft(I);nt($);var ut=a($,2);nt(ut),st(()=>{Z($,"min",r(V).min),Z($,"max",r(V).max),Z($,"step",r(V).step),Z(ut,"min",r(V).min),Z(ut,"max",r(V).max),Z(ut,"step",r(V).step)}),ve($,()=>H[t.pDef.partName][r(V).name],yt=>H[t.pDef.partName][r(V).name]=yt),ve(ut,()=>H[t.pDef.partName][r(V).name],yt=>H[t.pDef.partName][r(V).name]=yt),P(w,I)},Je=w=>{var I=Qs();jt(I,22,()=>["Off","On"],$=>$,($,ut,yt)=>{var lt=Hs(),Ct=s(lt,!0);e(lt);var Pt={};st(()=>{S(Ct,ut),Pt!==(Pt=r(yt))&&(lt.value=(lt.__value=r(yt))??"")}),P($,lt)}),e(I),Oa(I,()=>H[t.pDef.partName][r(V).name],$=>H[t.pDef.partName][r(V).name]=$),P(w,I)},oa=w=>{var I=tl();jt(I,22,()=>r(V).dropdown,$=>$,($,ut,yt)=>{var lt=$s(),Ct=s(lt,!0);e(lt);var Pt={};st(()=>{S(Ct,ut),Pt!==(Pt=r(yt))&&(lt.value=(lt.__value=r(yt))??"")}),P($,lt)}),e(I),Oa(I,()=>H[t.pDef.partName][r(V).name],$=>H[t.pDef.partName][r(V).name]=$),P(w,I)},He=w=>{var I=xa("unknown");P(w,I)};Ie(Oe,w=>{r(V).pType===ta.eNumber?w(na):r(V).pType===ta.eCheckbox?w(Je,1):r(V).pType===ta.eDropdown?w(oa,2):w(He,!1)})}e(Ae);var Et=a(Ae);let Qe;var Ce=s(Et,!0);e(Et);var ie=a(Et);let Pe;var ca=s(ie,!0);e(ie);var Zt=a(ie),Fe=s(Zt,!0);e(Zt);var Me=a(Zt),ia=s(Me,!0);e(Me);var D=a(Me);let F;var U=s(D,!0);e(D),e(ce),st(()=>{Le=Dt(ce,1,"svelte-3rhvir",null,Le,{changed:H[t.pDef.partName][r(V).name]!==r(V).init}),S(Ne,`${r(j)+1}.${r(we)+1}`),S(je,r(V).name),Qe=Dt(Et,1,"svelte-3rhvir",null,Qe,{hideColumn:r(n)}),S(Ce,r(V).unit),Pe=Dt(ie,1,"svelte-3rhvir",null,Pe,{hideColumn:r(n)}),S(ca,r(V).init),S(Fe,r(V).min),S(ia,r(V).max),F=Dt(D,1,"svelte-3rhvir",null,F,{hideColumn:r(n)}),S(U,r(V).step)}),g("click",ze,()=>J(r(V).name)),P(Wt,ce)}),e(Jt),st(()=>{S(oe,r(j)+1),Z(wt,"colspan",r(C)),S(De,r(p).sectionName),Z(Vt,"colspan",r(Y)),Be=Dt(Jt,1,"svelte-3rhvir",null,Be,{collaps:r(R)[r(p).sectionID]})}),St(gt,()=>r(R)[r(p).sectionID],Wt=>r(R)[r(p).sectionID]=Wt),P(_,M)}),e(ee);var Bt=a(ee,2),_e=a(s(Bt),2);nt(_e),e(Bt);var le=a(Bt,2),Ve=a(le,2),re=a(Ve,2),Ee=a(re,2);Re(Ee,{okName:"Done",okFunc:ft,sizeLarge:!0,get modalOpen(){return r(u)},set modalOpen(_){y(u,_,!0)},children:(_,p)=>{var j=sl(),M=a(Ft(j),2),at=s(M,!0);e(M),st(()=>S(at,r(A))),P(_,j)},$$slots:{default:!0}});var Ze=a(Ee,2);Re(Ze,{okName:"Save into localStorage",okFunc:E,get modalOpen(){return r(k)},set modalOpen(_){y(k,_,!0)},children:(_,p)=>{Is(_,{get pageName(){return t.pDef.partName},get storeName(){return r(N)},set storeName(j){y(N,j,!0)}})},$$slots:{default:!0}}),e(Rt);var Ke=a(Rt,2);Xa(Ke,{get svgPath(){return r(f)},get modalOpen(){return r(W)},set modalOpen(_){y(W,_,!0)}});var Yt=a(Ke,2),ne=s(Yt);e(Yt);var pe=a(Yt,2),ye=s(pe);Ca(ye,{get pFig(){return t.pFig},full:!0}),e(pe);var Ge=a(pe,2),ke=s(Ge);Ca(ke,{get pFig(){return t.pFig},full:!1}),e(Ge),e(xt),st(()=>{sa(qt,r(d)),Xe=Dt(qt,1,"svelte-3rhvir",null,Xe,{colorWarn:r(c)}),se=Dt(qe,1,"svelte-3rhvir",null,se,{hideColumn:r(n)}),he=Dt(Ye,1,"svelte-3rhvir",null,he,{hideColumn:r(n)}),be=Dt(ra,1,"svelte-3rhvir",null,be,{hideColumn:r(n)}),Z(_e,"size",r(At)),Z(ne,"src",r(f)),Z(ne,"alt",r(f))}),g("change",It,vt),g("click",Xt,()=>{y(v,!0)}),g("click",Ut,()=>{y(i,!0)}),g("click",We,b),g("click",me,z),ve(_e,()=>r(o),_=>y(o,_)),g("click",le,h),g("click",Ve,Q),g("click",re,()=>{y(k,!0)}),g("click",Yt,bt),P(l,xt),pt()}Mt(["change","click"]);var nl=T('<nav class="svelte-19ddkqr"><button class="svelte-19ddkqr">0</button> <button class="svelte-19ddkqr">&lt-</button> <button class="svelte-19ddkqr">|&lt</button> <button class="svelte-19ddkqr">||</button> <button class="svelte-19ddkqr">&gt|</button> <button class="svelte-19ddkqr">-&gt</button> <input type="range" min="0" class="svelte-19ddkqr"/> <input type="number" min="0" class="svelte-19ddkqr"/></nav>');function ol(l,t){_t(t,!0);let o=Nt(t,"tMax",3,10),n=Nt(t,"tStep",3,.1),d=Nt(t,"tUpdate",3,500),c=Nt(t,"simTime",15,0),v=null,i=0,u;const k=4;function m(){v!==null&&(clearInterval(v),v=null)}function N(){u<0&&c()<=0?c(o()):u>0&&c()>=o()?c(0):c(c()+u)}function A(){const Q=d()/2**(Math.abs(i)-1);u=i<0?-n():n(),v=setInterval(N,Q)}function x(){m(),c(0),i=0}function f(){m(),i=0,u=-n(),N()}function W(){m(),i=0,u=n(),N()}function R(){m(),i=Math.max(i-1,-k),A()}function K(){m(),i=Math.min(i+1,k),A()}function O(){m(),i=0}ts(()=>{m()});var tt=nl(),ot=s(tt),dt=a(ot,2),vt=a(dt,2),h=a(vt,2),X=a(h,2),G=a(X,2),E=a(G,2);nt(E);var et=a(E,2);nt(et),e(tt),st(()=>{Z(E,"max",o()),Z(E,"step",n()),Z(et,"max",o()),Z(et,"step",n())}),g("click",ot,x),g("click",dt,R),g("click",vt,f),g("click",h,O),g("click",X,W),g("click",G,K),ve(E,c),ve(et,c),P(l,tt),pt()}Mt(["click"]);var cl=T('<nav class="svelte-4db1ot"><button aria-labelledby="zoomInit" class="svelte-4db1ot"><div class="zero svelte-4db1ot"></div></button><button aria-labelledby="zoomIn" class="svelte-4db1ot"><div class="zoomin svelte-4db1ot"></div></button><button aria-labelledby="zoomOut" class="svelte-4db1ot"><div class="zoomout svelte-4db1ot"></div></button><button aria-labelledby="moveLeft" class="svelte-4db1ot"><div class="arrowleft svelte-4db1ot"></div></button><button aria-labelledby="moveRight" class="svelte-4db1ot"><div class="arrowright svelte-4db1ot"></div></button><button aria-labelledby="moveUp" class="svelte-4db1ot"><div class="arrowup svelte-4db1ot"></div></button><button aria-labelledby="moveDown" class="svelte-4db1ot"><div class="arrowdown svelte-4db1ot"></div></button></nav>');function il(l,t){_t(t,!0);var o=cl(),n=s(o),d=a(n),c=a(d),v=a(c),i=a(v),u=a(i),k=a(u);e(o),g("click",n,()=>t.zoomClick("zoomInit")),g("click",d,()=>t.zoomClick("zoomIn")),g("click",c,()=>t.zoomClick("zoomOut")),g("click",v,()=>t.zoomClick("moveLeft")),g("click",i,()=>t.zoomClick("moveRight")),g("click",u,()=>t.zoomClick("moveUp")),g("click",k,()=>t.zoomClick("moveDown")),P(l,o),pt()}Mt(["click"]);var q=ws(()=>L),dl=T('<div class="svelte-1am8pdu"><label class="svelte-1am8pdu"><input type="checkbox" class="svelte-1am8pdu"/>main part</label> <label class="svelte-1am8pdu"><input type="checkbox" class="svelte-1am8pdu"/>main skeleton</label> <label class="svelte-1am8pdu"><input type="checkbox" class="svelte-1am8pdu"/>second parts</label> <label class="svelte-1am8pdu"><input type="checkbox" class="svelte-1am8pdu"/>second skeletons</label> <label class="svelte-1am8pdu"><input type="checkbox" class="svelte-1am8pdu"/>dynamics</label> <label class="svelte-1am8pdu"><input type="checkbox" class="svelte-1am8pdu"/>ruler</label> <label class="svelte-1am8pdu"><input type="checkbox" class="svelte-1am8pdu"/>frame of reference</label> <label class="svelte-1am8pdu"><input type="checkbox" class="svelte-1am8pdu"/>points</label> <label class="svelte-1am8pdu"><input type="checkbox" class="svelte-1am8pdu"/>lines</label> <label class="svelte-1am8pdu"><input type="checkbox" class="svelte-1am8pdu"/>vectors</label></div>');function vl(l,t){_t(t,!1),ps();var o=dl(),n=s(o),d=s(n);nt(d),Lt(),e(n);var c=a(n,2),v=s(c);nt(v),Lt(),e(c);var i=a(c,2),u=s(i);nt(u),Lt(),e(i);var k=a(i,2),m=s(k);nt(m),Lt(),e(k);var N=a(k,2),A=s(N);nt(A),Lt(),e(N);var x=a(N,2),f=s(x);nt(f),Lt(),e(x);var W=a(x,2),R=s(W);nt(R),Lt(),e(W);var K=a(W,2),O=s(K);nt(O),Lt(),e(K);var tt=a(K,2),ot=s(tt);nt(ot),Lt(),e(tt);var dt=a(tt,2),vt=s(dt);nt(vt),Lt(),e(dt),e(o),St(d,()=>q().dLayers.main,h=>q(q().dLayers.main=h)),St(v,()=>q().dLayers.mainB,h=>q(q().dLayers.mainB=h)),St(u,()=>q().dLayers.second,h=>q(q().dLayers.second=h)),St(m,()=>q().dLayers.secondB,h=>q(q().dLayers.secondB=h)),St(A,()=>q().dLayers.dynamics,h=>q(q().dLayers.dynamics=h)),St(f,()=>q().dLayers.ruler,h=>q(q().dLayers.ruler=h)),St(R,()=>q().dLayers.refframe,h=>q(q().dLayers.refframe=h)),St(O,()=>q().dLayers.points,h=>q(q().dLayers.points=h)),St(ot,()=>q().dLayers.lines,h=>q(q().dLayers.lines=h)),St(vt,()=>q().dLayers.vectors,h=>q(q().dLayers.vectors=h)),P(l,o),pt()}var ul=T('<section class="svelte-3zd82f"><!> <div class="rack svelte-3zd82f"><canvas class="full svelte-3zd82f"></canvas> <!></div> <div class="rack svelte-3zd82f"><canvas class="zoom svelte-3zd82f"></canvas> <!></div></section>');function fl(l,t){_t(t,!0);let o=Nt(t,"simTime",15,0);const n=400,d=1200;let c=B(n),v,i,u;function k(b,z){if(v){const C=v.getContext("2d");C.clearRect(0,0,C.canvas.width,C.canvas.height);try{u=b.getAdjustFull(C.canvas.width,C.canvas.height),b.draw(C,u,z)}catch(Y){console.log(Y)}}}function m(b,z,C){if(i){const Y=i.getContext("2d");Y.clearRect(0,0,Y.canvas.width,Y.canvas.height);try{(z===void 0||z.init===0)&&(z=b.getAdjustZoom(Y.canvas.width,Y.canvas.height)),b.draw(Y,z,C)}catch(At){console.log(At)}}}function N(){const b=v.getContext("2d"),z=i.getContext("2d"),C=Math.min(Math.max(.4*r(c),n),d);b.canvas.width=C,b.canvas.height=C,z.canvas.width=C,z.canvas.height=C,L.canvasZWidth=C,L.zAdjust.init===0&&(L.zAdjust=t.pFig.getAdjustZoom(z.canvas.width,z.canvas.height))}function A(){N(),k(t.pFig,L.dLayers),m(t.pFig,L.zAdjust,L.dLayers)}function x(b,z,C){k(b,C),m(b,z,C)}es(()=>{N()}),pa(()=>{x(t.pFig,L.zAdjust,L.dLayers)});function f(b){const z=i.getContext("2d");switch(b){case"zoomInit":L.zAdjust=t.pFig.getAdjustZoom(z.canvas.width,z.canvas.height);break;case"zoomIn":L.zAdjust=ea(.7,L.zAdjust);break;case"zoomOut":L.zAdjust=ea(1.3,L.zAdjust);break;case"moveLeft":L.zAdjust.xMin+=-.2*L.zAdjust.xyDiff;break;case"moveRight":L.zAdjust.xMin+=.2*L.zAdjust.xyDiff;break;case"moveUp":L.zAdjust.yMin+=.2*L.zAdjust.xyDiff;break;case"moveDown":L.zAdjust.yMin+=-.2*L.zAdjust.xyDiff;break;default:console.log(`ERR423: ${b} has no case!`)}m(t.pFig,L.zAdjust,L.dLayers)}const W=3e3,R=10,K=3;let O={timestamp:0,offsetX:0,offsetY:0};function tt(b){b.button===0&&(O.timestamp=Date.now(),O.offsetX=b.offsetX,O.offsetY=b.offsetY)}function ot(b){if(b.button===0)if(Date.now()-O.timestamp<W){const z=Math.abs(O.offsetX-b.offsetX),C=Math.abs(O.offsetY-b.offsetY);if(z<R&&C<R){const[Y,At]=Qt(b.offsetX,b.offsetY,u);L.zAdjust=os(Y,At,L.zAdjust),x(t.pFig,L.zAdjust,L.dLayers)}if(z>R&&C>R){const Y=z/C,At=1/Y;if(Y<K&&At<K){const[xt,Rt]=Qt(b.offsetX,b.offsetY,u),[It,Xt]=Qt(O.offsetX,O.offsetY,u),Ot=i.getContext("2d").canvas.width;L.zAdjust=cs(xt,Rt,It,Xt,Ot,Ot),x(t.pFig,L.zAdjust,L.dLayers)}}}else console.log(`Warn205: ignore ${b.offsetX} ${b.offsetY} because too slow`)}function dt(b){if(v){const z=v.getContext("2d");if(b.buttons===1){const C=b.offsetX-O.offsetX,Y=b.offsetY-O.offsetY;k(t.pFig,L.dLayers),z.beginPath(),z.rect(O.offsetX,O.offsetY,C,Y),z.strokeStyle=va.mouse,z.stroke()}if(L.dLayers.ruler){const[C,Y]=Qt(b.offsetX,b.offsetY,u);z.clearRect(5,5,200,25),z.font="15px Arial",z.fillStyle=va.ruler,z.fillText(`x: ${C.toFixed(4)} y: ${Y.toFixed(4)}`,5,20)}}}let vt,h,X;function G(b){if(b.button===0){const[z,C]=Qt(b.offsetX,b.offsetY,L.zAdjust);vt=z,h=C,X=is(L.zAdjust)}}function E(b){if(b.buttons===1){const[z,C]=Qt(b.offsetX,b.offsetY,X);L.zAdjust=ds(vt,h,z,C,X),m(t.pFig,L.zAdjust,L.dLayers)}else if(L.dLayers.ruler&&i){const z=i.getContext("2d"),[C,Y]=Qt(b.offsetX,b.offsetY,L.zAdjust);z.clearRect(5,5,200,25),z.font="15px Arial",z.fillStyle=va.ruler,z.fillText(`x: ${C.toFixed(4)} y: ${Y.toFixed(4)}`,5,20)}}function et(b){b.preventDefault(),b.deltaY>0?L.zAdjust=ea(.7,L.zAdjust):L.zAdjust=ea(1.3,L.zAdjust),m(t.pFig,L.zAdjust,L.dLayers)}var Q=ul();wa("resize",as,A);var ft=s(Q);vl(ft,{});var rt=a(ft,2),J=s(rt);Z(J,"width",n),Z(J,"height",n),la(J,b=>v=b,()=>v);var bt=a(J,2);ol(bt,{get tMax(){return t.pDefSim.tMax},get tStep(){return t.pDefSim.tStep},get tUpdate(){return t.pDefSim.tUpdate},get simTime(){return o()},set simTime(b){o(b)}}),e(rt);var ct=a(rt,2),mt=s(ct);Z(mt,"width",n),Z(mt,"height",n),la(mt,b=>i=b,()=>i);var Tt=a(mt,2);il(Tt,{zoomClick:f}),e(ct),e(Q),xs("innerWidth",b=>y(c,b,!0)),g("mousedown",J,tt),g("mouseup",J,ot),g("mousemove",J,dt),g("mousedown",mt,G),g("mousemove",mt,E),wa("wheel",mt,et),P(l,Q),pt()}Mt(["mousedown","mouseup","mousemove"]);var ml=T("<tr><td> </td><td> </td><td> </td><td><i> </i></td><td><i> </i></td></tr>"),hl=T('<li class="svelte-4p0rl5"><input type="checkbox" class="toggle svelte-4p0rl5"/> <label class="label svelte-4p0rl5"><div class="arrow svelte-4p0rl5"></div> </label> <button class="svelte-4p0rl5"> </button> <button class="svelte-4p0rl5">Export parameters</button> <div class="nested svelte-4p0rl5"><article class="svelte-4p0rl5"> <strong> </strong> </article> <table class="svelte-4p0rl5"><thead class="svelte-4p0rl5"><tr><td>Num</td><td>Name</td><td>Value</td><td>Init</td><td>Set?</td></tr></thead><tbody class="svelte-4p0rl5"></tbody></table></div></li>'),bl=T('<section class="svelte-4p0rl5"><h2 class="svelte-4p0rl5">Sub-designs <span class="svelte-4p0rl5"> </span></h2> <ol class="svelte-4p0rl5"></ol></section>');function gl(l,t){_t(t,!0);const o=kt(()=>Object.keys(t.subD));async function n(x){const f=t.subD[x];Ia(f.partName,Sa(f.dparam),!0);const W=us(`/${t.pLink[f.partName]}`);Va(W)}function d(x){const f=t.subD[x].partName,W=t.subD[x].dparam,R=`sub-design parameters of ${f} from ${t.origPartName}`;ka(f,Sa(W),R)}function c(x){let f="[ ";return f+=`${de(ua(x[0]))}, `,f+=`${de(ua(x[1]))}, `,f+=`${de(ua(x[2]))} ]`,f}function v(x){let f="[ ";return f+=`${de(x[0])}, `,f+=`${de(x[1])}, `,f+=`${de(x[2])} ]`,f}function i(x){return x?"Yes":""}var u=bl(),k=s(u),m=a(s(k)),N=s(m);e(m),e(k);var A=a(k,2);jt(A,20,()=>r(o),x=>x,(x,f)=>{var W=hl(),R=s(W);nt(R),vs(R,!1);var K=a(R,2),O=a(s(K));e(K);var tt=a(K,2),ot=s(tt);e(tt);var dt=a(tt,2),vt=a(dt,2),h=s(vt),X=s(h),G=a(X),E=s(G,!0);e(G);var et=a(G);e(h);var Q=a(h,2),ft=a(s(Q));jt(ft,22,()=>Object.keys(t.subD[f].dparam),rt=>rt,(rt,J,bt)=>{var ct=ml();let mt;var Tt=s(ct),b=s(Tt,!0);e(Tt);var z=a(Tt),C=s(z,!0);e(z);var Y=a(z),At=s(Y,!0);e(Y);var xt=a(Y),Rt=s(xt),It=s(Rt,!0);e(Rt),e(xt);var Xt=a(xt),Ut=s(Xt),Ot=s(Ut,!0);e(Ut),e(Xt),e(ct),st(te=>{mt=Dt(ct,1,"svelte-4p0rl5",null,mt,{changed:t.subD[f].dparam[J].chg}),S(b,r(bt)+1),S(C,J),S(At,t.subD[f].dparam[J].val),S(It,t.subD[f].dparam[J].init),S(Ot,te)},[()=>i(t.subD[f].dparam[J].chg)]),P(rt,ct)}),e(ft),e(Q),e(vt),e(W),st((rt,J,bt)=>{Z(R,"id",`cb_${f??""}`),Z(K,"for",`cb_${f??""}`),S(O,` ${f??""}`),S(ot,`Go to ${t.pLink[t.subD[f].partName]??""}`),S(X,`${rt??""} parameters of `),S(E,t.subD[f].partName),S(et,` with orientation ${J??""} (degree) at position
						${bt??""} (mm)`)},[()=>Object.keys(t.subD[f].dparam).length,()=>c(t.subD[f].orientation),()=>v(t.subD[f].position)]),g("click",tt,()=>n(f)),g("click",dt,()=>d(f)),P(x,W)}),e(A),e(u),st(()=>S(N,`(Number of sub-instances: ${r(o).length??""})`)),P(l,u),pt()}Mt(["click"]);var _l=T("<button> </button>"),pl=T('<tr class="svelte-1h881do"><td class="svelte-1h881do"> </td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">2d- svg</td><td class="svelte-1h881do"><button class="svelte-1h881do">preview</button></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr>'),yl=T('<tr class="svelte-1h881do"><td class="svelte-1h881do"> </td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">2d- dxf</td><td class="svelte-1h881do"><button class="svelte-1h881do">preview</button></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr>'),kl=T('<!> <section class="svelte-1h881do"><h2 class="svelte-1h881do">Log</h2> <textarea rows="5" cols="94" readonly="" wrap="soft"></textarea></section> <section class="svelte-1h881do"><h2 class="svelte-1h881do">2D Drawings : <!> <button>All faces merged</button></h2></section> <!> <section class="svelte-1h881do"><h2 class="svelte-1h881do">Export</h2> <table class="svelte-1h881do"><caption class="svelte-1h881do">Output files</caption><thead class="svelte-1h881do"><tr class="svelte-1h881do"><th class="svelte-1h881do">#</th><th class="svelte-1h881do">Filename</th><th class="svelte-1h881do">Type</th><th class="svelte-1h881do">Preview</th><th class="svelte-1h881do">Download</th></tr></thead><tbody class="svelte-1h881do"><tr class="svelte-1h881do"><td class="svelte-1h881do">1</td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">0-params- pxJson</td><td class="svelte-1h881do"><button class="svelte-1h881do">preview</button></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr><tr class="svelte-1h881do"><td class="svelte-1h881do">2</td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">1-log- txtLog</td><td class="svelte-1h881do"><button class="svelte-1h881do">preview</button></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr><!><tr class="svelte-1h881do"><td class="svelte-1h881do"> </td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">2d- svg</td><td class="svelte-1h881do"><button class="svelte-1h881do">preview</button></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr><!><tr class="svelte-1h881do"><td class="svelte-1h881do"> </td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">2d- dxf</td><td class="svelte-1h881do"><button class="svelte-1h881do">preview</button></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr><tr class="svelte-1h881do"><td class="svelte-1h881do"> </td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">4-pax- paxJson</td><td class="svelte-1h881do"><button class="svelte-1h881do">preview</button></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr><tr class="svelte-1h881do"><td class="svelte-1h881do"> </td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">5-script- scad</td><td class="svelte-1h881do"><button class="svelte-1h881do">preview</button></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr><tr class="svelte-1h881do"><td class="svelte-1h881do"> </td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">5-script- jsCad</td><td class="svelte-1h881do"><button class="svelte-1h881do">preview</button></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr><tr class="svelte-1h881do"><td class="svelte-1h881do"> </td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">5-script- pyFreecad</td><td class="svelte-1h881do"><button class="svelte-1h881do">preview</button></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr><tr class="svelte-1h881do"><td class="svelte-1h881do"> </td><td class="svelte-1h881do"> </td><td class="svelte-1h881do">6-zip- zip</td><td class="svelte-1h881do"></td><td class="svelte-1h881do"><button class="svelte-1h881do">download</button></td></tr></tbody></table> <dialog id="dBview" class="svelte-1h881do"><textarea readonly="" wrap="soft" class="svelte-1h881do"></textarea> <button class="bback svelte-1h881do">close - back - escape</button></dialog> <!></section>',1);function Dl(l,t){_t(t,!0);const o="ParametrixAll";function n(D){let F=!0;const U=/warn/i;return D.search(U)<0&&(F=!1),F}function d(D,F){let U=F;if(D.length===0)console.log("warn404: Drawing has an empty face list");else{const w=D.slice();w.push(o),w.includes(U)||(U=D[0])}return U}function c(D,F){let U;const w=Object.keys(D),I=d(w,F);return w.includes(I)?U=D[I]:U=fs(D),U}let v=B(0),i=B(o);Pa(()=>{y(i,d(Object.keys(t.fgeom(0,H[t.pDef.partName]).fig),""),!0)});let u=kt(()=>t.fgeom(r(v),H[t.pDef.partName])),k=kt(()=>{const D=new Date().toLocaleTimeString();let F=`Geometry ${t.pDef.partName} computed at ${D}
`;return F+=r(u).logstr,F}),m=kt(()=>Object.keys(r(u).fig)),N=kt(()=>r(u).calcErr),A=kt(()=>n(r(u).logstr)),x=kt(()=>c(r(u).fig,r(i))),f=kt(()=>r(u).sub);function W(D,F){const U=document.createElement("a"),w=URL.createObjectURL(F);U.setAttribute("href",w),U.setAttribute("download",D),U.click(),U.remove(),URL.revokeObjectURL(w)}function R(D,F,U){const w=document.createElement("a"),I="data:"+U+";utf-8,"+encodeURIComponent(F);w.setAttribute("href",I),w.setAttribute("download",D),w.click(),w.remove()}function K(){const D=/[-:]/g,F=/\..*$/;return new Date().toISOString().replace(D,"").replace(F,"").replace("T","_")}async function O(D){const F=/^svg_/,U=/^dxf_/;let w=it.eSVG,I="all";D.match(F)?(w=it.eSVG,I=D.replace(F,"")):D.match(U)?(w=it.eDXF,I=D.replace(U,"")):D==="allsvg"?w=it.eSVGALL:D==="alldxf"?w=it.eDXFALL:D==="compute_log"?w=it.eTXTLOG:D==="pax"?w=it.ePAX:D==="oscad"?w=it.eOPENSCAD:D==="ojscad"?w=it.eJSCAD:D==="freecad"?w=it.eFREECAD:D==="zip"?w=it.eZIP:console.log(`err883: downloadExport iExportFace ${D} invalid`);const $=hs(w),ut=gs(w),yt=bs(w),lt=t.pDef.partName+"_"+I+"_"+K()+$;if(yt){const Ct=await ms(t.fgeom,r(v),H[t.pDef.partName],t.pDef,w);W(lt,Ct)}else{const Ct=Na(t.fgeom,H[t.pDef.partName],t.pDef,I,w);R(lt,Ct,ut)}}async function tt(){ka(t.pDef.partName,H[t.pDef.partName],"")}let ot,dt=B("");function vt(D){y(dt,D,!0),ot.showModal()}function h(D,F){vt(Na(t.fgeom,H[t.pDef.partName],t.pDef,D,F))}function X(){ot.close()}var G=kl(),E=Ft(G);rl(E,{get pDef(){return t.pDef},get pFig(){return r(x)}});var et=a(E,2),Q=a(s(et),2);ha(Q);let ft;e(et);var rt=a(et,2),J=s(rt),bt=a(s(J));jt(bt,16,()=>r(m),D=>D,(D,F)=>{var U=_l(),w=s(U,!0);e(U),st(()=>{Dt(U,1,ja({theFace:r(i)===F}),"svelte-1h881do"),S(w,F)}),g("click",U,()=>{y(i,F,!0)}),P(D,U)});var ct=a(bt,2);e(J),e(rt);var mt=a(rt,2);fl(mt,{get pDefSim(){return t.pDef.sim},get pFig(){return r(x)},get simTime(){return r(v)},set simTime(D){y(v,D,!0)}});var Tt=a(mt,2),b=a(s(Tt),2),z=a(s(b),2),C=s(z),Y=a(s(C)),At=s(Y);e(Y);var xt=a(Y,2),Rt=s(xt);e(xt);var It=a(xt),Xt=s(It);e(It),e(C);var Ut=a(C),Ot=a(s(Ut)),te=s(Ot);e(Ot);var qt=a(Ot,2),Xe=s(qt);e(qt);var ee=a(qt),ue=s(ee);e(ee),e(Ut);var fe=a(Ut);jt(fe,18,()=>r(m),D=>D,(D,F,U)=>{var w=pl(),I=s(w),$=s(I,!0);e(I);var ut=a(I),yt=s(ut);e(ut);var lt=a(ut,2),Ct=s(lt);e(lt);var Pt=a(lt),da=s(Pt);e(Pt),e(w),st(()=>{S($,3+r(U)),S(yt,`${t.pDef.partName??""}_${F??""}.svg`)}),g("click",Ct,()=>{h(F,it.eSVG)}),g("click",da,async()=>{await O(`svg_${F}`)}),P(D,w)});var Gt=a(fe),ae=s(Gt),We=s(ae,!0);e(ae);var me=a(ae),qe=s(me);e(me);var se=a(me,2),Ye=s(se);e(se);var he=a(se),ra=s(he);e(he),e(Gt);var be=a(Gt);jt(be,18,()=>r(m),D=>D,(D,F,U)=>{var w=yl(),I=s(w),$=s(I,!0);e(I);var ut=a(I),yt=s(ut);e(ut);var lt=a(ut,2),Ct=s(lt);e(lt);var Pt=a(lt),da=s(Pt);e(Pt),e(w),st(()=>{S($,4+r(m).length+r(U)),S(yt,`${t.pDef.partName??""}_${F??""}.dxf`)}),g("click",Ct,()=>{h(F,it.eDXF)}),g("click",da,async()=>{await O(`dxf_${F}`)}),P(D,w)});var ge=a(be),Bt=s(ge),_e=s(Bt,!0);e(Bt);var le=a(Bt),Ve=s(le);e(le);var re=a(le,2),Ee=s(re);e(re);var Ze=a(re),Ke=s(Ze);e(Ze),e(ge);var Yt=a(ge),ne=s(Yt),pe=s(ne,!0);e(ne);var ye=a(ne),Ge=s(ye);e(ye);var ke=a(ye,2),_=s(ke);e(ke);var p=a(ke),j=s(p);e(p),e(Yt);var M=a(Yt),at=s(M),ht=s(at,!0);e(at);var zt=a(at),oe=s(zt);e(zt);var wt=a(zt,2),De=s(wt);e(wt);var Vt=a(wt),xe=s(Vt);e(Vt),e(M);var gt=a(M),Jt=s(gt),Be=s(Jt,!0);e(Jt);var Wt=a(Jt),V=s(Wt);e(Wt);var we=a(Wt,2),ce=s(we);e(we);var Le=a(we),Se=s(Le);e(Le),e(gt);var Ne=a(gt),Ht=s(Ne),ze=s(Ht,!0);e(Ht);var je=a(Ht),Ae=s(je);e(je);var Oe=a(je,2),na=s(Oe);e(Oe);var Je=a(Oe),oa=s(Je);e(Je),e(Ne);var He=a(Ne),Et=s(He),Qe=s(Et,!0);e(Et);var Ce=a(Et),ie=s(Ce);e(Ce);var Pe=a(Ce,3),ca=s(Pe);e(Pe),e(He),e(z),e(b);var Zt=a(b,2),Fe=s(Zt);ha(Fe);var Me=a(Fe,2);e(Zt),la(Zt,D=>ot=D,()=>ot);var ia=a(Zt,2);gl(ia,{get subD(){return r(f)},get origPartName(){return t.pDef.partName},get pLink(){return t.pLink}}),e(Tt),st(()=>{sa(Q,r(k)),ft=Dt(Q,1,"svelte-1h881do",null,ft,{colorErr:r(N),colorWarn:r(A)}),Dt(ct,1,ja({theFace:r(i)===o}),"svelte-1h881do"),S(At,`px_${t.pDef.partName??""}.json`),S(te,`${t.pDef.partName??""}_all.log`),S(We,3+r(m).length),S(qe,`${t.pDef.partName??""}_all.svg`),S(_e,4+2*r(m).length),S(Ve,`${t.pDef.partName??""}_all.dxf`),S(pe,5+2*r(m).length),S(Ge,`${t.pDef.partName??""}_all.pax.json`),S(ht,6+2*r(m).length),S(oe,`${t.pDef.partName??""}_all_noarc_openscad.scad`),S(Be,7+2*r(m).length),S(V,`${t.pDef.partName??""}_all_noarc_jscad.js`),S(ze,8+2*r(m).length),S(Ae,`${t.pDef.partName??""}_all_freecad.py`),S(Qe,9+2*r(m).length),S(ie,`${t.pDef.partName??""}_all.zip`),sa(Fe,r(dt))}),g("click",ct,()=>{y(i,o)}),g("click",Rt,()=>{vt(Vs(t.pDef.partName,H[t.pDef.partName],""))}),g("click",Xt,tt),g("click",Xe,()=>{h("all",it.eTXTLOG)}),g("click",ue,async()=>{await O("compute_log")}),g("click",Ye,()=>{h("all",it.eSVGALL)}),g("click",ra,async()=>{await O("allsvg")}),g("click",Ee,()=>{h("all",it.eDXFALL)}),g("click",Ke,async()=>{await O("alldxf")}),g("click",_,()=>{h("all",it.ePAX)}),g("click",j,async()=>{await O("pax")}),g("click",De,()=>{h("all",it.eOPENSCAD)}),g("click",xe,async()=>{await O("oscad")}),g("click",ce,()=>{h("all",it.eJSCAD)}),g("click",Se,async()=>{await O("ojscad")}),g("click",na,()=>{h("all",it.eFREECAD)}),g("click",oa,async()=>{await O("freecad")}),g("click",ca,async()=>{await O("zip")}),g("click",Me,X),P(l,G),pt()}Mt(["click"]);var xl=T('<h1 class="svelte-fytm9v"> </h1> <article class="svelte-fytm9v"> </article> <!> <!>',1);function wl(l,t){_t(t,!0),Ns(t.pageDef);var o=xl(),n=Ft(o),d=s(n,!0);e(n);var c=a(n,2),v=s(c);e(c);var i=a(c,2);Os(i,{get pDef(){return t.pageDef.pDef}});var u=a(i,2);Dl(u,{get pDef(){return t.pageDef.pDef},get fgeom(){return t.pageDef.pGeom},get pLink(){return t.pLink}}),st(()=>{S(d,t.pageDef.pTitle),S(v,`[${t.pageDef.pDef.partName??""}]: ${t.pageDef.pDescription??""}`)}),P(l,o),pt()}function Tl(l,t){_t(t,!0),wl(l,{get pageDef(){return t.data.pageDef},get pLink(){return t.data.allLink}}),pt()}export{Tl as component,Ml as universal};
